port: 18086
api: 
  status: true
  refresh: true
exporter:
  prometheus:
    enable: true
    port: 1234
targets:
  - name: curl local
    target: "http://127.0.0.1"
    type: url
    interval: 3
  - name: curl baidu
    target: "http://baidu.com"
    type: url
    interval: 10
    transform:
      search:
        text: "baidu"
  - name: curl baidu failed
    target: "http://baidu.com"
    type: url
    interval: rand(10s,20s)
    transform:
      search:
        text: "百度"
  - name: dotnet health check
    target: "http://localhost:44359/healthz"
    type: url
    interval: rand(30s)
    transform:
      json: 
        rootPath: results
        extractNameFrom: name
        extractNameFromProperty: true
        extractContentFrom: status
        contentMapper:
         Healthy: 1
         Unhealthy: 0
         Degraded: 0
  - name: curl local with header
    target: "http://127.0.0.1"
    type: url
    interval: 3s
    headers:
      Host: www.baidu.com
      Content-Type: application/json
    contents:
      - "{test:1}"
  - name: ping local
    target: 127.0.0.1
    type: ping
    interval: 3m
  - name: telnet local 80
    target: 127.0.0.1:80
    type: telnet
    interval: 2.5s
  - name: cmd
    target: 127.0.0.1:80
    type: cmd
    interval: 5000ms
    contents:
      - openssl s_client --connect www.baidu.com
      - echo ok
    transform: 
     search:
       text: sucess